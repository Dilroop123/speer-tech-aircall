{"ast":null,"code":"import _slicedToArray from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import axios from\"axios\";import{useLocation,Route,Switch,Redirect}from\"react-router-dom\";// reactstrap components\nimport{Button,Card,CardHeader,Container,CardBody,FormGroup,Form,Input,InputGroupAddon,InputGroupText,InputGroup,Row,Col,Alert}from\"reactstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PasswordReset=function PasswordReset(props){var mainContent=React.useRef(null);var location=useLocation();var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),password=_React$useState2[0],setPassword=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),token=_React$useState4[0],setToken=_React$useState4[1];React.useEffect(function(){document.body.classList.add(\"bg-default\");return function(){document.body.classList.remove(\"bg-default\");};},[]);React.useEffect(function(){var queryString=window.location.search;var urlParams=new URLSearchParams(queryString);setToken(urlParams.get('token'));},[]);var updatePassword=function updatePassword(){axios({method:\"post\",url:\"http://localhost:8000/api/password_reset/confirm/\",data:{token:token,password:password}}).then(function(_ref){var data=_ref.data;if((data===null||data===void 0?void 0:data.status)===\"OK\"){alert(\"Cheers !! Your password has been updated\");}// dispatch({ type: \"LOGIN\", id: username, token: data.token });\n}).catch(function(thrown){if(axios.isCancel(thrown)){console.error(\"Request canceled\",thrown.message);}else{alert(thrown);}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",ref:mainContent,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header bg-gradient-info py-7 py-lg-8\",children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(\"div\",{className:\"header-body text-center mb-7\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{lg:\"5\",md:\"6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-white\",children:\"Welcome!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lead text-light\",children:\"Update your account password\"})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"separator separator-bottom separator-skew zindex-100\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",preserveAspectRatio:\"none\",version:\"1.1\",viewBox:\"0 0 2560 100\",x:\"0\",y:\"0\",children:/*#__PURE__*/_jsx(\"polygon\",{className:\"fill-default\",points:\"2560 0 2560 100 0 100\"})})})]}),/*#__PURE__*/_jsx(Container,{className:\"mt--8 pb-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{lg:\"5\",md:\"7\",children:/*#__PURE__*/_jsx(Card,{className:\"bg-secondary shadow border-0\",children:/*#__PURE__*/_jsxs(CardBody,{className:\"px-lg-5 py-lg-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-muted mb-4\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Enter your new password\"})}),/*#__PURE__*/_jsxs(Form,{role:\"form\",children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsxs(InputGroup,{className:\"input-group-alternative\",children:[/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"prepend\",children:/*#__PURE__*/_jsx(InputGroupText,{children:/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-lock-circle-open\"})})}),/*#__PURE__*/_jsx(Input,{placeholder:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{className:\"my-4\",color:\"primary\",type:\"button\",onClick:function onClick(){return updatePassword();},children:\"Update\"})})]})]})})})})})]})});};export default PasswordReset;","map":{"version":3,"sources":["/Users/dilroopsingh/Desktop/canatrace/src/layouts/PasswordReset.js"],"names":["React","axios","useLocation","Route","Switch","Redirect","Button","Card","CardHeader","Container","CardBody","FormGroup","Form","Input","InputGroupAddon","InputGroupText","InputGroup","Row","Col","Alert","PasswordReset","props","mainContent","useRef","location","useState","password","setPassword","token","setToken","useEffect","document","body","classList","add","remove","queryString","window","search","urlParams","URLSearchParams","get","updatePassword","method","url","data","then","status","alert","catch","thrown","isCancel","console","error","message","e","target","value"],"mappings":"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","sourcesContent":["\nimport React from \"react\";\nimport axios from \"axios\";\nimport { useLocation, Route, Switch, Redirect } from \"react-router-dom\";\n// reactstrap components\n\nimport {\n  Button,\n  Card,\n  CardHeader,\n  Container,\n  CardBody,\n  FormGroup,\n  Form,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Row,\n  Col,\n  Alert,\n} from \"reactstrap\";\n\nconst PasswordReset = (props) => {\n  const mainContent = React.useRef(null);\n  const location = useLocation();\n  const [password, setPassword] = React.useState(\"\");\n  const [token, setToken] = React.useState();\n\n  React.useEffect(() => {\n    document.body.classList.add(\"bg-default\");\n    return () => {\n      document.body.classList.remove(\"bg-default\");\n    };\n  }, []);\n\n\n  React.useEffect(() => {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    setToken(urlParams.get('token'))\n  }, []);\n\n  const updatePassword = () => {\n    axios({\n      method: \"post\",\n      url: \"http://localhost:8000/api/password_reset/confirm/\",\n      data: {\n        token: token,\n        password: password,\n\n      },\n    })\n      .then(function ({ data }) {\n\n        if (data?.status === \"OK\") {\n          alert(\"Cheers !! Your password has been updated\");\n        }\n        // dispatch({ type: \"LOGIN\", id: username, token: data.token });\n      })\n      .catch(function (thrown) {\n        if (axios.isCancel(thrown)) {\n          console.error(\"Request canceled\", thrown.message);\n        } else {\n          alert(thrown);\n        }\n      });\n  }\n\n  return (\n    <>\n      <div className=\"main-content\" ref={mainContent}>\n\n        <div className=\"header bg-gradient-info py-7 py-lg-8\">\n          <Container>\n            <div className=\"header-body text-center mb-7\">\n              <Row className=\"justify-content-center\">\n                <Col lg=\"5\" md=\"6\">\n                  <h1 className=\"text-white\">Welcome!</h1>\n                  <p className=\"text-lead text-light\">\n                    Update your account password\n                  </p>\n                </Col>\n              </Row>\n            </div>\n          </Container>\n          <div className=\"separator separator-bottom separator-skew zindex-100\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              preserveAspectRatio=\"none\"\n              version=\"1.1\"\n              viewBox=\"0 0 2560 100\"\n              x=\"0\"\n              y=\"0\"\n            >\n              <polygon\n                className=\"fill-default\"\n                points=\"2560 0 2560 100 0 100\"\n              />\n            </svg>\n          </div>\n        </div>\n        {/* Page content */}\n        <Container className=\"mt--8 pb-5\">\n          <Row className=\"justify-content-center\">\n            <Col lg=\"5\" md=\"7\">\n              <Card className=\"bg-secondary shadow border-0\">\n                <CardBody className=\"px-lg-5 py-lg-5\">\n                  <div className=\"text-center text-muted mb-4\">\n                    <small>Enter your new password</small>\n                  </div>\n                  <Form role=\"form\">\n\n                    <FormGroup>\n                      <InputGroup className=\"input-group-alternative\">\n                        <InputGroupAddon addonType=\"prepend\">\n                          <InputGroupText>\n                            <i className=\"ni ni-lock-circle-open\" />\n                          </InputGroupText>\n                        </InputGroupAddon>\n                        <Input\n                          placeholder=\"Password\"\n                          type=\"password\"\n                          value={password}\n                          onChange={(e) => setPassword(e.target.value)}\n                        />\n                      </InputGroup>\n                    </FormGroup>\n\n                    <div className=\"text-center\">\n                      <Button\n                        className=\"my-4\"\n                        color=\"primary\"\n                        type=\"button\"\n                        onClick={() => updatePassword()}\n                      >\n                        Update\n                      </Button>\n                    </div>\n                  </Form>\n                </CardBody>\n              </Card>\n\n            </Col>\n          </Row>\n        </Container>\n      </div>\n\n    </>\n  );\n};\n\nexport default PasswordReset;\n"]},"metadata":{},"sourceType":"module"}