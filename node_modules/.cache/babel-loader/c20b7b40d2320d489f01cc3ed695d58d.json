{"ast":null,"code":"var _jsxFileName = \"/Users/dilroopsingh/Desktop/canatrace/src/views/examples/Documents.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport axios from \"axios\";\nimport { Button, Card, CardHeader, CardBody, FormGroup, Form, Input, Table, Container, Row, Col, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\nimport baseUrl from \"../../assets/constants/baseUrl\";\nimport pdfImage from \"../../assets/img/icons/common/pdf.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nconst Documents = () => {\n  _s();\n\n  var _selectedDocument$fil, _selectedDocument$fil2, _selectedDocument$fil3;\n\n  const [selectedDocument, setSelectedDocument] = React.useState();\n  const isDocumentModalOpen = !!selectedDocument;\n  const [documents, setDocuments] = React.useState();\n  const userId = localStorage.getItem(\"pk\");\n\n  const getDocumentList = async () => {\n    try {\n      await axios({\n        method: \"get\",\n        url: `${baseUrl.url}wallet_files/?userId=${userId}`\n      }).then(function (response) {\n        setDocuments(response.data.results);\n      }).catch(function (thrown) {\n        if (axios.isCancel(thrown)) {\n          console.error(\"Request canceled\", thrown.message);\n        } else {\n          console.error(thrown.message);\n        }\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  React.useEffect(() => {\n    getDocumentList();\n  }, []);\n\n  const onUpload = async e => {\n    let formData = new FormData(); //Adding files to the formdata\n\n    formData.append(\"file\", e.target.files[0]);\n    formData.append(\"name\", \"fileName\");\n    formData.append(\"userId\", userId);\n    await axios({\n      // Endpoint to send files\n      url: `${baseUrl.url}wallet_files/`,\n      method: \"POST\",\n      // Attaching the form data\n      data: formData\n    }).then(res => {\n      console.log(res);\n    }) // Handle the response from backend here\n    .catch(err => {\n      console.log(err);\n    });\n    getDocumentList();\n  };\n\n  const onDeletePress = async id => {\n    const response = await fetch(`${baseUrl.url}wallet_files/${id}/`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        status: false\n      })\n    });\n    const resData = await response.json();\n    setDocuments(documents === null || documents === void 0 ? void 0 : documents.filter(doc => doc.id != id));\n  };\n\n  const showDeleteAlert = id => {\n    var answer = window.confirm(\"Save data?\");\n\n    if (answer) {\n      onDeletePress(id);\n    } else {\n      console.log(\"no\");\n    }\n  };\n\n  const TableBody = () => {\n    return documents === null || documents === void 0 ? void 0 : documents.map(function (item, i) {\n      var _item$file, _item$file2;\n\n      var splitByDot = item === null || item === void 0 ? void 0 : (_item$file = item.file) === null || _item$file === void 0 ? void 0 : _item$file.split(\"/\");\n      var name = splitByDot === null || splitByDot === void 0 ? void 0 : splitByDot.slice(-1)[0];\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          scope: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: (item === null || item === void 0 ? void 0 : (_item$file2 = item.file) === null || _item$file2 === void 0 ? void 0 : _item$file2.split(\".\").pop()) === \"pdf\" ? pdfImage : item === null || item === void 0 ? void 0 : item.file,\n            height: 30,\n            width: 30\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setSelectedDocument(item),\n            children: \"Open\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => showDeleteAlert(item === null || item === void 0 ? void 0 : item.id),\n            href: \"javascript:void(0)\",\n            className: \"delete\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, item === null || item === void 0 ? void 0 : item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      style: {\n        maxWidth: \"none\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: isDocumentModalOpen,\n        toggle: () => setSelectedDocument(''),\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          toggle: () => setSelectedDocument(''),\n          children: selectedDocument === null || selectedDocument === void 0 ? void 0 : (_selectedDocument$fil = selectedDocument.file) === null || _selectedDocument$fil === void 0 ? void 0 : (_selectedDocument$fil2 = _selectedDocument$fil.split(\"/\")) === null || _selectedDocument$fil2 === void 0 ? void 0 : _selectedDocument$fil2.slice(-1)[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: !!selectedDocument && (selectedDocument === null || selectedDocument === void 0 ? void 0 : (_selectedDocument$fil3 = selectedDocument.file) === null || _selectedDocument$fil3 === void 0 ? void 0 : _selectedDocument$fil3.split('.').pop()) === 'pdf' ? /*#__PURE__*/_jsxDEV(\"object\", {\n            width: \"100%\",\n            height: \"400\",\n            data: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.file,\n            type: \"application/pdf\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            resizeMode: \"contain\",\n            src: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.file,\n            height: \"400\",\n            width: \"400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            onClick: () => setSelectedDocument(''),\n            children: \"Okay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 100,\n          backgroundColor: \"blue\",\n          marginBottom: 50,\n          borderRadius: 15,\n          marginTop: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"mb-5 mb-xl-0\",\n        xl: \"8\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"border-0\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              className: \"align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"mb-0\",\n                  children: \"Upload Documents\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col text-right\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"form-control-alternative\",\n                  onChange: onUpload,\n                  type: \"file\",\n                  accept: \"image/*,application/pdf\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            className: \"align-items-center table-flush\",\n            responsive: true,\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"thead-light\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"File name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Open\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: TableBody()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Documents, \"okl8G4FrkHTACSO0jZTjd6jO9B4=\");\n\n_c = Documents;\nexport default Documents;\n\nvar _c;\n\n$RefreshReg$(_c, \"Documents\");","map":{"version":3,"sources":["/Users/dilroopsingh/Desktop/canatrace/src/views/examples/Documents.js"],"names":["React","Document","Page","pdfjs","axios","Button","Card","CardHeader","CardBody","FormGroup","Form","Input","Table","Container","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","baseUrl","pdfImage","GlobalWorkerOptions","workerSrc","version","Documents","selectedDocument","setSelectedDocument","useState","isDocumentModalOpen","documents","setDocuments","userId","localStorage","getItem","getDocumentList","method","url","then","response","data","results","catch","thrown","isCancel","console","error","message","e","useEffect","onUpload","formData","FormData","append","target","files","res","log","err","onDeletePress","id","fetch","headers","body","JSON","stringify","status","resData","json","filter","doc","showDeleteAlert","answer","window","confirm","TableBody","map","item","i","splitByDot","file","split","name","slice","pop","maxWidth","height","backgroundColor","marginBottom","borderRadius","marginTop"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { Document, Page, pdfjs } from 'react-pdf';\n\nimport axios from \"axios\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  FormGroup,\n  Form,\n  Input,\n  Table,\n  Container,\n  Row,\n  Col,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter\n} from \"reactstrap\";\n\nimport baseUrl from \"../../assets/constants/baseUrl\";\n\nimport pdfImage from \"../../assets/img/icons/common/pdf.png\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nconst Documents = () => {\n\n  const [selectedDocument, setSelectedDocument] = React.useState();\n\n  const isDocumentModalOpen = !!selectedDocument\n\n  const [documents, setDocuments] = React.useState();\n  const userId = localStorage.getItem(\"pk\");\n  const getDocumentList = async () => {\n    try {\n      await axios({\n        method: \"get\",\n\n        url: `${baseUrl.url}wallet_files/?userId=${userId}`,\n      })\n        .then(function (response) {\n          setDocuments(response.data.results);\n        })\n        .catch(function (thrown) {\n          if (axios.isCancel(thrown)) {\n            console.error(\"Request canceled\", thrown.message);\n          } else {\n            console.error(thrown.message);\n          }\n        });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  React.useEffect(() => {\n    getDocumentList();\n  }, []);\n\n  const onUpload = async (e) => {\n    let formData = new FormData();\n\n    //Adding files to the formdata\n    formData.append(\"file\", e.target.files[0]);\n    formData.append(\"name\", \"fileName\");\n    formData.append(\"userId\", userId);\n\n    await axios({\n      // Endpoint to send files\n      url: `${baseUrl.url}wallet_files/`,\n      method: \"POST\",\n\n      // Attaching the form data\n      data: formData,\n    })\n      .then((res) => {\n        console.log(res);\n      }) // Handle the response from backend here\n      .catch((err) => {\n        console.log(err);\n      });\n    getDocumentList();\n  };\n\n  const onDeletePress = async (id) => {\n    const response = await fetch(`${baseUrl.url}wallet_files/${id}/`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        status: false,\n      }),\n    });\n\n    const resData = await response.json();\n    setDocuments(documents?.filter((doc) => doc.id != id));\n  };\n\n  const showDeleteAlert = (id) => {\n    var answer = window.confirm(\"Save data?\");\n    if (answer) {\n      onDeletePress(id);\n    } else {\n      console.log(\"no\");\n    }\n  };\n\n  const TableBody = () => {\n    return documents?.map(function (item, i) {\n      var splitByDot = item?.file?.split(\"/\");\n      var name = splitByDot?.slice(-1)[0];\n\n      return (\n        <tr key={item?.id}>\n          <th scope=\"row\">\n            <img\n              src={\n                item?.file?.split(\".\").pop() === \"pdf\" ? pdfImage : item?.file\n              }\n              height={30}\n              width={30}\n            />\n          </th>\n          <td>{name}</td>\n          <td>\n            <Button onClick={() => setSelectedDocument(item)}>\n              Open\n            </Button>\n          </td>\n          <td>\n            <Button\n              onClick={() => showDeleteAlert(item?.id)}\n              href=\"javascript:void(0)\"\n              className=\"delete\"\n            >\n              Delete\n            </Button>\n          </td>\n        </tr>\n      );\n    });\n  };\n\n  return (\n    <>\n      {/* Page content */}\n      <Container style={{maxWidth: \"none\"}}>\n        <Modal isOpen={isDocumentModalOpen} toggle={() => setSelectedDocument('')}>\n          <ModalHeader toggle={() => setSelectedDocument('')}>\n            {selectedDocument?.file?.split(\"/\")?.slice(-1)[0]}\n          </ModalHeader>\n          <ModalBody>\n            {!!selectedDocument &&\n              selectedDocument?.file?.split('.').pop() === 'pdf' ? (\n            <object\n              width=\"100%\"\n              height=\"400\"\n              data={selectedDocument?.file}\n              type=\"application/pdf\"\n            ></object>\n          ) : (\n            <img\n              resizeMode=\"contain\"\n              src={selectedDocument?.file}\n              height=\"400\"\n              width=\"400\"\n            />\n          )}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"primary\" onClick={() => setSelectedDocument('')}>Okay</Button>\n          </ModalFooter>\n        </Modal>\n        <div\n          style={{\n            height: 100,\n            backgroundColor: \"blue\",\n            marginBottom: 50,\n            borderRadius: 15,\n            marginTop: 10,\n          }}\n        ></div>\n        <Col className=\"mb-5 mb-xl-0\" xl=\"8\">\n          <Card className=\"shadow\">\n            <CardHeader className=\"border-0\">\n              <Row className=\"align-items-center\">\n                <div className=\"col\">\n                  <h3 className=\"mb-0\">Upload Documents</h3>\n                </div>\n                <div className=\"col text-right\">\n                  <Input\n                    className=\"form-control-alternative\"\n                    onChange={onUpload}\n                    type=\"file\"\n                    accept=\"image/*,application/pdf\"\n                  />\n                </div>\n              </Row>\n            </CardHeader>\n            <Table className=\"align-items-center table-flush\" responsive>\n              <thead className=\"thead-light\">\n                <tr>\n                  <th scope=\"col\">Preview</th>\n                  <th scope=\"col\">File name</th>\n                  <th scope=\"col\">Open</th>\n                  <th scope=\"col\">Delete</th>\n                </tr>\n              </thead>\n              <tbody>{TableBody()}</tbody>\n            </Table>\n          </Card>\n        </Col>\n      </Container>\n    </>\n  );\n};\n\nexport default Documents;\n"]},"metadata":{},"sourceType":"module"}