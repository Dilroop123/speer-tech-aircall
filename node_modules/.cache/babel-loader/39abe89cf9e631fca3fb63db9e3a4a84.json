{"ast":null,"code":"import _defineProperty from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Button,Card,CardHeader,CardBody,FormGroup,Form,Input,Container,Row,Col}from\"reactstrap\";import axios from\"axios\";// core components\nimport UserHeader from\"components/Headers/UserHeader.js\";import baseUrl from\"../../assets/constants/baseUrl\";import placeholder from\"../../assets/img/icons/common/placeholder.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _profile$,_profile$2,_profile$3,_profile$4,_profile$5;var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),profile=_React$useState2[0],setProfile=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),avatar=_React$useState4[0],setAvatar=_React$useState4[1];var _React$useState5=React.useState(),_React$useState6=_slicedToArray(_React$useState5,2),state=_React$useState6[0],setState=_React$useState6[1];var userId=localStorage.getItem(\"pk\");var token=localStorage.getItem(\"token\");React.useEffect(function(){var isMounted=true;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(baseUrl.url,\"assets/\").concat(userId,\"/?key=avatar\"),{headers:{Authorization:\"Token \".concat(token)}});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setAvatar(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();return function(){isMounted=false;};},[]);React.useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{axios({method:\"get\",headers:{Authorization:\"Token \".concat(token)},url:\"\".concat(baseUrl.url,\"userinfo/\")}).then(function(response){var _apiResponse$,_apiResponse$2,_apiResponse$3,_apiResponse$4,_apiResponse$5;var apiResponse=response.data.results;setProfile(response.data.results);setState({phone_number:(apiResponse===null||apiResponse===void 0?void 0:apiResponse.length)>0&&((_apiResponse$=apiResponse[0])===null||_apiResponse$===void 0?void 0:_apiResponse$.phone_number),first_name:(apiResponse===null||apiResponse===void 0?void 0:apiResponse.length)>0&&((_apiResponse$2=apiResponse[0])===null||_apiResponse$2===void 0?void 0:_apiResponse$2.first_name),last_name:(apiResponse===null||apiResponse===void 0?void 0:apiResponse.length)>0&&((_apiResponse$3=apiResponse[0])===null||_apiResponse$3===void 0?void 0:_apiResponse$3.last_name),email:(apiResponse===null||apiResponse===void 0?void 0:apiResponse.length)>0&&((_apiResponse$4=apiResponse[0])===null||_apiResponse$4===void 0?void 0:_apiResponse$4.email),dob:(apiResponse===null||apiResponse===void 0?void 0:apiResponse.length)>0&&((_apiResponse$5=apiResponse[0])===null||_apiResponse$5===void 0?void 0:_apiResponse$5.dob)});}).catch(function(thrown){if(axios.isCancel(thrown)){console.error(\"Request canceled\",thrown.message);}else{console.error(thrown.message);}});}catch(e){console.error(e);}case 1:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);var handleChange=function handleChange(e){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},e.target.name,e.target.value)));};var updateProfile=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"\".concat(baseUrl.url,\"userinfo/\").concat(userId,\"/\"),state,{headers:{Authorization:\"Token \".concat(token)}});case 3:_yield$axios$put=_context3.sent;data=_yield$axios$put.data;alert(\"Proile is updated\");setProfile([state]);_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function updateProfile(){return _ref3.apply(this,arguments);};}();var onUpload=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var formData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:formData=new FormData();console.log(e.target.files[0]);formData.append(\"file\",e.target.files[0]);formData.append(\"key\",\"avatar\");_context4.next=6;return axios({// Endpoint to send files\nurl:\"\".concat(baseUrl.url,\"assets/\").concat(userId,\"/\"),method:\"PUT\",headers:{Authorization:\"Token \".concat(token)},// Attaching the form data\ndata:formData}).then(function(res){alert(\"Proile photo uploaded\");setAvatar(URL.createObjectURL(e.target.files[0]));})// Handle the response from backend here\n.catch(function(err){console.log(err);});case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function onUpload(_x){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UserHeader,{name:(profile===null||profile===void 0?void 0:profile.length)>0&&((_profile$=profile[0])===null||_profile$===void 0?void 0:_profile$.first_name)}),/*#__PURE__*/_jsx(Container,{className:\"mt--7\",fluid:true,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"order-xl-2 mb-5 mb-xl-0\",xl:\"4\",children:/*#__PURE__*/_jsxs(Card,{className:\"card-profile shadow\",children:[/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{className:\"order-lg-2\",lg:\"3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-profile-image\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#pablo\",onClick:function onClick(e){return e.preventDefault();},children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",width:\"200\",height:\"200\",className:\"rounded-circle\",onError:function onError(e){return e.currentTarget.src=placeholder;},src:!!avatar?avatar:placeholder})})})})}),/*#__PURE__*/_jsx(CardBody,{children:(profile===null||profile===void 0?void 0:profile.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",style:{marginTop:120},children:[/*#__PURE__*/_jsx(Input,{className:\"h5 font-weight-300\",onChange:onUpload,type:\"file\",accept:\"image/*\"}),/*#__PURE__*/_jsx(\"h3\",{children:((_profile$2=profile[0])===null||_profile$2===void 0?void 0:_profile$2.first_name)+\" \"+((_profile$3=profile[0])===null||_profile$3===void 0?void 0:_profile$3.last_name)}),/*#__PURE__*/_jsxs(\"div\",{className:\"h5 font-weight-300\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ni location_pin mr-2\"}),(_profile$4=profile[0])===null||_profile$4===void 0?void 0:_profile$4.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"h5 font-weight-300\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ni location_pin mr-2\"}),(_profile$5=profile[0])===null||_profile$5===void 0?void 0:_profile$5.phone_number]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"})]})})]})}),/*#__PURE__*/_jsx(Col,{className:\"order-xl-1\",xl:\"8\",children:/*#__PURE__*/_jsxs(Card,{className:\"bg-secondary shadow\",children:[/*#__PURE__*/_jsx(CardHeader,{className:\"bg-white border-0\",children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:\"8\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:\"My account\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",xs:\"4\",children:/*#__PURE__*/_jsx(Button,{color:\"primary\",href:\"#pablo\",onClick:updateProfile,size:\"sm\",children:\"Update\"})})]})}),/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"heading-small text-muted mb-4\",children:\"User information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pl-lg-4\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",htmlFor:\"input-username\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(Input,{className:\"form-control-alternative\",name:\"phone_number\",value:state===null||state===void 0?void 0:state.phone_number,placeholder:\"Phone Number\",type:\"number\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",htmlFor:\"input-email\",children:\"Email address\"}),/*#__PURE__*/_jsx(Input,{className:\"form-control-alternative\",id:\"input-email\",defaultValue:state===null||state===void 0?void 0:state.email,type:\"email\"})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",htmlFor:\"input-first-name\",children:\"First name\"}),/*#__PURE__*/_jsx(Input,{className:\"form-control-alternative\",value:state===null||state===void 0?void 0:state.first_name,name:\"first_name\",placeholder:\"First name\",type:\"text\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",htmlFor:\"input-last-name\",children:\"Last name\"}),/*#__PURE__*/_jsx(Input,{className:\"form-control-alternative\",value:state===null||state===void 0?void 0:state.last_name,name:\"last_name\",placeholder:\"Last name\",type:\"text\",onChange:handleChange})]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-control-label\",htmlFor:\"input-first-name\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(Input,{className:\"form-control-alternative\",value:state===null||state===void 0?void 0:state.dob,name:\"dob\",placeholder:\"Date of Birth\",type:\"date\",onChange:handleChange})]})})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"})]})})]})})]})})]});};export default Profile;","map":{"version":3,"sources":["/Users/dilroopsingh/Desktop/canatrace/src/views/examples/Profile.js"],"names":["React","Button","Card","CardHeader","CardBody","FormGroup","Form","Input","Container","Row","Col","axios","UserHeader","baseUrl","placeholder","Profile","useState","profile","setProfile","avatar","setAvatar","state","setState","userId","localStorage","getItem","token","useEffect","isMounted","get","url","headers","Authorization","data","console","error","method","then","response","apiResponse","results","phone_number","length","first_name","last_name","email","dob","catch","thrown","isCancel","message","e","handleChange","target","name","value","updateProfile","put","alert","onUpload","formData","FormData","log","files","append","res","URL","createObjectURL","err","preventDefault","currentTarget","src","marginTop"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  FormGroup,\n  Form,\n  Input,\n  Container,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport axios from \"axios\";\n// core components\nimport UserHeader from \"components/Headers/UserHeader.js\";\nimport baseUrl from \"../../assets/constants/baseUrl\";\nimport placeholder from \"../../assets/img/icons/common/placeholder.png\";\n\nconst Profile = () => {\n  const [profile, setProfile] = React.useState();\n  const [avatar, setAvatar] = React.useState();\n  const [state, setState] = React.useState();\n\n  const userId = localStorage.getItem(\"pk\");\n  const token = localStorage.getItem(\"token\");\n\n  React.useEffect(() => {\n    let isMounted = true;\n    (async () => {\n      // if (!profile.pk || !profile.token) return;\n\n      try {\n        const { data } = await axios.get(\n          `${baseUrl.url}assets/${userId}/?key=avatar`,\n          {\n            headers: {\n              Authorization: `Token ${token}`,\n            },\n          }\n        );\n\n        setAvatar(data);\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  React.useEffect(() => {\n    (async () => {\n      try {\n        axios({\n          method: \"get\",\n          headers: {\n            Authorization: `Token ${token}`,\n          },\n          url: `${baseUrl.url}userinfo/`,\n        })\n          .then(function (response) {\n            const apiResponse = response.data.results;\n\n            setProfile(response.data.results);\n\n            setState({\n              phone_number:\n                apiResponse?.length > 0 && apiResponse[0]?.phone_number,\n              first_name: apiResponse?.length > 0 && apiResponse[0]?.first_name,\n              last_name: apiResponse?.length > 0 && apiResponse[0]?.last_name,\n              email: apiResponse?.length > 0 && apiResponse[0]?.email,\n              dob: apiResponse?.length > 0 && apiResponse[0]?.dob,\n            });\n          })\n          .catch(function (thrown) {\n            if (axios.isCancel(thrown)) {\n              console.error(\"Request canceled\", thrown.message);\n            } else {\n              console.error(thrown.message);\n            }\n          });\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n  }, []);\n\n  const handleChange = (e) => {\n    setState({\n      ...state,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const updateProfile = async () => {\n    try {\n      // const uid = await AsyncStorage.getItem('pk');\n      // const token = await AsyncStorage.getItem('token');\n\n      const { data } = await axios.put(\n        `${baseUrl.url}userinfo/${userId}/`,\n        state,\n        {\n          headers: {\n            Authorization: `Token ${token}`,\n          },\n        }\n      );\n\n      alert(\"Proile is updated\");\n      setProfile([state]);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const onUpload = async (e) => {\n    const formData = new FormData();\n    console.log(e.target.files[0]);\n    formData.append(\"file\", e.target.files[0]);\n    formData.append(\"key\", \"avatar\");\n\n    await axios({\n      // Endpoint to send files\n      url: `${baseUrl.url}assets/${userId}/`,\n      method: \"PUT\",\n      headers: {\n        Authorization: `Token ${token}`,\n      },\n      // Attaching the form data\n      data: formData,\n    })\n      .then((res) => {\n        alert(\"Proile photo uploaded\");\n        setAvatar(URL.createObjectURL(e.target.files[0]));\n      }) // Handle the response from backend here\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  return (\n    <>\n      <UserHeader name={profile?.length > 0 && profile[0]?.first_name} />\n      {/* Page content */}\n      <Container className=\"mt--7\" fluid>\n        <Row>\n          <Col className=\"order-xl-2 mb-5 mb-xl-0\" xl=\"4\">\n            <Card className=\"card-profile shadow\">\n              <Row className=\"justify-content-center\">\n                <Col className=\"order-lg-2\" lg=\"3\">\n                  <div className=\"card-profile-image\">\n                    <a href=\"#pablo\" onClick={(e) => e.preventDefault()}>\n                      <img\n                        alt=\"\"\n                        width=\"200\"\n                        height=\"200\"\n                        className=\"rounded-circle\"\n                        onError={(e) => (e.currentTarget.src = placeholder)}\n                        src={!!avatar ? avatar : placeholder}\n                      />\n                    </a>\n                  </div>\n                </Col>\n              </Row>\n\n              <CardBody>\n                {profile?.length > 0 && (\n                  <div className=\"text-center\" style={{ marginTop: 120 }}>\n                    <Input\n                      className=\"h5 font-weight-300\"\n                      onChange={onUpload}\n                      type=\"file\"\n                      accept=\"image/*\"\n                    />\n                    <h3>\n                      {profile[0]?.first_name + \" \" + profile[0]?.last_name}\n                      {/* <span className=\"font-weight-light\">, 27</span> */}\n                    </h3>\n                    <div className=\"h5 font-weight-300\">\n                      <i className=\"ni location_pin mr-2\" />\n                      {profile[0]?.email}\n                    </div>\n                    <div className=\"h5 font-weight-300\">\n                      <i className=\"ni location_pin mr-2\" />\n                      {profile[0]?.phone_number}\n                    </div>\n                    {/* <div className=\"h5 mt-4\">\n                    <i className=\"ni business_briefcase-24 mr-2\" />\n                    Solution Manager - Creative Tim Officer\n                  </div>\n                  <div>\n                    <i className=\"ni education_hat mr-2\" />\n                    University of Computer Science\n                  </div> */}\n                    <hr className=\"my-4\" />\n                  </div>\n                )}\n              </CardBody>\n            </Card>\n          </Col>\n          <Col className=\"order-xl-1\" xl=\"8\">\n            <Card className=\"bg-secondary shadow\">\n              <CardHeader className=\"bg-white border-0\">\n                <Row className=\"align-items-center\">\n                  <Col xs=\"8\">\n                    <h3 className=\"mb-0\">My account</h3>\n                  </Col>\n                  <Col className=\"text-right\" xs=\"4\">\n                    <Button\n                      color=\"primary\"\n                      href=\"#pablo\"\n                      onClick={updateProfile}\n                      size=\"sm\"\n                    >\n                      Update\n                    </Button>\n                  </Col>\n                </Row>\n              </CardHeader>\n              <CardBody>\n                <Form>\n                  <h6 className=\"heading-small text-muted mb-4\">\n                    User information\n                  </h6>\n                  <div className=\"pl-lg-4\">\n                    <Row>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-username\"\n                          >\n                            Phone Number\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            name=\"phone_number\"\n                            value={state?.phone_number}\n                            placeholder=\"Phone Number\"\n                            type=\"number\"\n                            onChange={handleChange}\n                          />\n                        </FormGroup>\n                      </Col>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-email\"\n                          >\n                            Email address\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            id=\"input-email\"\n                            defaultValue={state?.email}\n                            type=\"email\"\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-first-name\"\n                          >\n                            First name\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            value={state?.first_name}\n                            name=\"first_name\"\n                            placeholder=\"First name\"\n                            type=\"text\"\n                            onChange={handleChange}\n                          />\n                        </FormGroup>\n                      </Col>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-last-name\"\n                          >\n                            Last name\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            value={state?.last_name}\n                            name=\"last_name\"\n                            placeholder=\"Last name\"\n                            type=\"text\"\n                            onChange={handleChange}\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col lg=\"6\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-first-name\"\n                          >\n                            Date of Birth\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            value={state?.dob}\n                            name=\"dob\"\n                            placeholder=\"Date of Birth\"\n                            type=\"date\"\n                            onChange={handleChange}\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                  </div>\n                  <hr className=\"my-4\" />\n                  {/* Address */}\n                  {/* <h6 className=\"heading-small text-muted mb-4\">\n                    Contact information\n                  </h6>\n                  <div className=\"pl-lg-4\">\n                    <Row>\n                      <Col md=\"12\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-address\"\n                          >\n                            Address\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            defaultValue=\"Bld Mihail Kogalniceanu, nr. 8 Bl 1, Sc 1, Ap 09\"\n                            id=\"input-address\"\n                            placeholder=\"Home Address\"\n                            type=\"text\"\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col lg=\"4\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-city\"\n                          >\n                            City\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            defaultValue=\"New York\"\n                            id=\"input-city\"\n                            placeholder=\"City\"\n                            type=\"text\"\n                          />\n                        </FormGroup>\n                      </Col>\n                      <Col lg=\"4\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-country\"\n                          >\n                            Country\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            defaultValue=\"United States\"\n                            id=\"input-country\"\n                            placeholder=\"Country\"\n                            type=\"text\"\n                          />\n                        </FormGroup>\n                      </Col>\n                      <Col lg=\"4\">\n                        <FormGroup>\n                          <label\n                            className=\"form-control-label\"\n                            htmlFor=\"input-country\"\n                          >\n                            Postal code\n                          </label>\n                          <Input\n                            className=\"form-control-alternative\"\n                            id=\"input-postal-code\"\n                            placeholder=\"Postal code\"\n                            type=\"number\"\n                          />\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                  </div> */}\n                  {/* <hr className=\"my-4\" /> */}\n                  {/* Description */}\n                  {/* <h6 className=\"heading-small text-muted mb-4\">About me</h6> */}\n                  {/* <div className=\"pl-lg-4\">\n                    <FormGroup>\n                      <label>About Me</label>\n                      <Input\n                        className=\"form-control-alternative\"\n                        placeholder=\"A few words about you ...\"\n                        rows=\"4\"\n                        defaultValue=\"A beautiful Dashboard for Bootstrap 4. It is Free and\n                        Open Source.\"\n                        type=\"textarea\"\n                      />\n                    </FormGroup>\n                  </div> */}\n                </Form>\n              </CardBody>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}