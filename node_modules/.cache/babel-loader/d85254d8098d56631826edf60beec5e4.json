{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dilroopsingh/Desktop/canatrace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import axios from\"axios\";import{Button,Card,CardHeader,CardBody,FormGroup,Form,Input,InputGroupAddon,InputGroupText,InputGroup,Row,Col}from\"reactstrap\";import baseUrl from\"../../assets/constants/baseUrl\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(props){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),userName=_React$useState2[0],setUserName=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var signIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios({method:\"post\",url:baseUrl.loginUrl+\"login/\",data:{username:userName,password:password}}).then(function(_ref2){var data=_ref2.data;console.log(\"Logging In...\");if((data===null||data===void 0?void 0:data.token)!==null){window.localStorage.setItem(\"token\",data===null||data===void 0?void 0:data.token);window.localStorage.setItem(\"pk\",data===null||data===void 0?void 0:data.pk);window.localStorage.setItem(\"username\",data===null||data===void 0?void 0:data.first_name);props.history.push(\"/admin/documents\");}// dispatch({ type: \"LOGIN\", id: username, token: data.token });\n}).catch(function(thrown){if(axios.isCancel(thrown)){console.error(\"Request canceled\",thrown.message);}else{alert(\"Wrong credential\");}});case 1:case\"end\":return _context.stop();}}},_callee);}));return function signIn(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Col,{lg:\"5\",md:\"7\",children:[/*#__PURE__*/_jsx(Card,{className:\"bg-secondary shadow border-0\",children:/*#__PURE__*/_jsxs(CardBody,{className:\"px-lg-5 py-lg-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-muted mb-4\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Sign in with credentials\"})}),/*#__PURE__*/_jsxs(Form,{role:\"form\",children:[/*#__PURE__*/_jsx(FormGroup,{className:\"mb-3\",children:/*#__PURE__*/_jsxs(InputGroup,{className:\"input-group-alternative\",children:[/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"prepend\",children:/*#__PURE__*/_jsx(InputGroupText,{children:/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-email-83\"})})}),/*#__PURE__*/_jsx(Input,{placeholder:\"Email\",type:\"email\",value:userName,onChange:function onChange(e){return setUserName(e.target.value);}})]})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsxs(InputGroup,{className:\"input-group-alternative\",children:[/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"prepend\",children:/*#__PURE__*/_jsx(InputGroupText,{children:/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-lock-circle-open\"})})}),/*#__PURE__*/_jsx(Input,{placeholder:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-control custom-control-alternative custom-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"custom-control-input\",id:\" customCheckLogin\",type:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-control-label\",htmlFor:\" customCheckLogin\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"Remember me\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{className:\"my-4\",color:\"primary\",type:\"button\",onClick:function onClick(){return signIn();},children:\"Sign in\"})})]})]})}),/*#__PURE__*/_jsxs(Row,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Col,{xs:\"6\",children:/*#__PURE__*/_jsx(\"a\",{className:\"text-light\",href:\"#pablo\",onClick:function onClick(e){return e.preventDefault();},children:/*#__PURE__*/_jsx(\"small\",{children:\"Forgot password?\"})})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",xs:\"6\",children:/*#__PURE__*/_jsx(\"a\",{className:\"text-light\",href:\"./register\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Create new account\"})})})]})]})});};export default Login;","map":{"version":3,"sources":["/Users/dilroopsingh/Desktop/canatrace/src/views/examples/Login.js"],"names":["React","axios","Button","Card","CardHeader","CardBody","FormGroup","Form","Input","InputGroupAddon","InputGroupText","InputGroup","Row","Col","baseUrl","Login","props","useState","userName","setUserName","password","setPassword","signIn","method","url","loginUrl","data","username","then","console","log","token","window","localStorage","setItem","pk","first_name","history","push","catch","thrown","isCancel","error","message","alert","e","target","value","preventDefault"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport axios from \"axios\";\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  FormGroup,\n  Form,\n  Input,\n  InputGroupAddon,\n  InputGroupText,\n  InputGroup,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport baseUrl from \"../../assets/constants/baseUrl\";\n\nconst Login = (props) => {\n  const [userName, setUserName] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  const signIn = async () => {\n    axios({\n      method: \"post\",\n      url: baseUrl.loginUrl + \"login/\",\n      data: {\n        username: userName,\n        password: password,\n      },\n    })\n      .then(function ({ data }) {\n        console.log(\"Logging In...\");\n        if (data?.token !== null) {\n          window.localStorage.setItem(\"token\", data?.token);\n          window.localStorage.setItem(\"pk\", data?.pk);\n          window.localStorage.setItem(\"username\", data?.first_name);\n          props.history.push(\"/admin/documents\");\n        }\n\n        // dispatch({ type: \"LOGIN\", id: username, token: data.token });\n      })\n      .catch(function (thrown) {\n        if (axios.isCancel(thrown)) {\n          console.error(\"Request canceled\", thrown.message);\n        } else {\n          alert(\"Wrong credential\");\n        }\n      });\n  };\n  return (\n    <>\n      <Col lg=\"5\" md=\"7\">\n        <Card className=\"bg-secondary shadow border-0\">\n          <CardBody className=\"px-lg-5 py-lg-5\">\n            <div className=\"text-center text-muted mb-4\">\n              <small>Sign in with credentials</small>\n            </div>\n            <Form role=\"form\">\n              <FormGroup className=\"mb-3\">\n                <InputGroup className=\"input-group-alternative\">\n                  <InputGroupAddon addonType=\"prepend\">\n                    <InputGroupText>\n                      <i className=\"ni ni-email-83\" />\n                    </InputGroupText>\n                  </InputGroupAddon>\n                  <Input\n                    placeholder=\"Email\"\n                    type=\"email\"\n                    value={userName}\n                    onChange={(e) => setUserName(e.target.value)}\n                  />\n                </InputGroup>\n              </FormGroup>\n              <FormGroup>\n                <InputGroup className=\"input-group-alternative\">\n                  <InputGroupAddon addonType=\"prepend\">\n                    <InputGroupText>\n                      <i className=\"ni ni-lock-circle-open\" />\n                    </InputGroupText>\n                  </InputGroupAddon>\n                  <Input\n                    placeholder=\"Password\"\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                  />\n                </InputGroup>\n              </FormGroup>\n              <div className=\"custom-control custom-control-alternative custom-checkbox\">\n                <input\n                  className=\"custom-control-input\"\n                  id=\" customCheckLogin\"\n                  type=\"checkbox\"\n                />\n                <label\n                  className=\"custom-control-label\"\n                  htmlFor=\" customCheckLogin\"\n                >\n                  <span className=\"text-muted\">Remember me</span>\n                </label>\n              </div>\n              <div className=\"text-center\">\n                <Button\n                  className=\"my-4\"\n                  color=\"primary\"\n                  type=\"button\"\n                  onClick={() => signIn()}\n                >\n                  Sign in\n                </Button>\n              </div>\n            </Form>\n          </CardBody>\n        </Card>\n        <Row className=\"mt-3\">\n          <Col xs=\"6\">\n            <a\n              className=\"text-light\"\n              href=\"#pablo\"\n              onClick={(e) => e.preventDefault()}\n            >\n              <small>Forgot password?</small>\n            </a>\n          </Col>\n          <Col className=\"text-right\" xs=\"6\">\n            <a\n              className=\"text-light\"\n              href=\"./register\"\n            >\n              <small>Create new account</small>\n            </a>\n          </Col>\n        </Row>\n      </Col>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}